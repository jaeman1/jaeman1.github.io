---
title: "네트워크 공부 4"
date: 2024-09-24
categories: [IT, 네트워크]
tags: [Network, Study]
---

# OSI 7계층 모델의 3계층

## 3계층의 기능

### - 3계층에서 하는 일

- 다른 네트워크 대역 (멀리 떨어진 곳의 네트워크) 까지 데이터를 전달하는 경로 제어
- 발신에서 착신까지의 패킷의 경로 제어

### - 3계층에서 쓰는 주소

#### - IP주소

![](assets/img/네트워크%20공부/4-1.jpg)

- 통신할 때 IP주소 뿐 아니라 서브넷 마스크, 게이트웨이 정보도 필요함

### - 3계층의 프로토콜

#### - ARP 프로토콜

- IP주소를 이용해 MAC 주소를 알아옴
  ![](assets/img/네트워크%20공부/4-2.jpg)

#### - IPv4 프로토콜

- WAN에서 통신할 때 사용
  ![](assets/img/네트워크%20공부/4-3.jpg)

#### - ICMP 프로토콜

- 통신이 제대로 이루어지고 있는지 확인할 때 사용
  ![](assets/img/네트워크%20공부/4-4.jpg)

## 일반적인 IP 주소

### - Classful IP주소

- 클래스 기반으로 IP를 나누는 방식으로, 클래스에 따라 네트워크와 호스트 구분이 달라지며 이 방식은 IP 낭비가 발생할 수 있음

![](assets/img/네트워크%20공부/4-5.jpg)

- 이진수로 변환된 모습
  ![](assets/img/네트워크%20공부/4-6.jpg)

#### - A 클래스

- 첫번째 필드를 네트워크 대역 구분에 사용 (최대 2^7개의 네트워크 대역 구분 가능)
- 나머지 필드를 네트워크 내의 장비를 구분하는데 사용 (최대 2^24개의 장비 구분 가능)

→ 큰 조직에서 사용하기에 적합

#### - B 클래스

- 첫번째, 두번째 필드를 네트워크 대역 구분에 사용 (최대 2^14개의 네트워크 대역 구분 가능)
- 나머지 필드를 네트워크 내의 장비를 구분하는데 사용 (최대 2^16개의 장비 구분 가능)

#### - C 클래스

- 세번째 필드까지 네트워크 대역 구분에 사용
- 마지막 필드를 네트워크 내의 장비를 구분하는데 사용

#### - D 클래스

- 멀티캐스트 통신에 사용

#### - E 클래스

- 연구 및 실험용으로 사용

### - Classless IP주소

- 클래스 구분 없이 IP 주소를 더 효율적으로 사용하기 위한 방식으로, 낭비를 줄이기 위해 서브넷 마스크와 함께 사용함

![](assets/img/네트워크%20공부/4-8.jpg)

#### - 서브넷 마스크

- 어디까지 네트워크 대역을 구분하는데 사용되고 어디부터 호스트를 구분하는데 - 32비트로 이루어지며, 1과 0으로 네트워크 대역과 호스트 구분
- 1에서 0으로 바뀌는 부분까지가 네트워크 대역, 나머지는 호스트 구분에 사용됨
- 예시 :  
  ![](assets/img/네트워크%20공부/4-7.jpg)  
  ![](assets/img/네트워크%20공부/4-9.jpg)

### - 사설IP와 공인IP

![](assets/img/네트워크%20공부/4-10.jpg)

- 공인IP 1개당 2^32개의 사설IP를 매핑해 사용 가능
- 실제 인터넷 통신은 공인 IP를 통해 이루어짐
- 외부 네트워크에서는 사설IP가 보이지 않음

#### - 공유기의 역할

- 외부에서 사설 IP가 보이지 않기 때문에 공유기가 NAT 테이블을 통해 사설 IP와 공인 IP 간의 통신을 중계
- 외부에서 들어온 패킷을 NAT 테이블을 확인해 내부 장비로 전달
- 나간 적 없는 패킷이 들어오면 공유기가 패킷을 폐기함  
  → 주로 서버는 공인 IP 사용

  ##### - 포트포워딩

  - 특정 포트를 열어 내부 장비로 직접 통신할 수 있게 해줌
  - 포트 포워딩을 설정하면 공인 IP를 통해 내부의 사설 IP 장비에 접속 가능

## 특수한 IP 주소

### - 0.0.0.0

- **와일드카드 주소**: 나머지 모든 IP 주소를 의미, 주로 라우팅에서 사용

### - 127.X.X.X

- **루프백(Loopback) 주소**: 자신의 장치(로컬)로 트래픽을 보내는 데 사용, 네트워크 연결 테스트에 활용

### - 게이트웨이 주소

- 내부 네트워크에서 **외부 네트워크(인터넷)**로 연결되는 출입구 역할을 하는 주소
- **게이트웨이를 알지 못하면 외부와 통신할 수 없음**

---

## \* 실습

### - 내 PC의 IP주소(사설 IP) _VS_ 네이버 서버가 알고있는 나의 IP주소(공인 IP)

![](assets/img/네트워크%20공부/4-11.jpg)
